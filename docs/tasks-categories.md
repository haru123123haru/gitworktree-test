# カテゴリ分類機能 タスクリスト

**ブランチ名:** `feature/categories`
**worktree:** `main-categories`
**優先度:** 中

---

## 概要

タスクをカテゴリで分類し、カテゴリごとにフィルタリングできるようにする。
カテゴリには色を設定でき、視覚的にタスクを区別できる。

---

## タスク一覧

### 1. データモデルの設計

- [ ] カテゴリデータ構造の設計
  - id, name, color, createdAt
- [ ] `src/data/categories.json` ファイル作成
- [ ] タスクデータに `categoryIds` フィールド追加（配列）
- [ ] プリセットカラーの定義

### 2. バックエンド実装

#### 2.1 カテゴリ CRUD API
- [ ] `GET /api/categories` - 一覧取得
- [ ] `POST /api/categories` - 作成
- [ ] `PUT /api/categories/:id` - 更新
- [ ] `DELETE /api/categories/:id` - 削除
- [ ] カテゴリ名の重複チェック

#### 2.2 タスクAPIの更新
- [ ] タスク作成時にcategoryIds受付
- [ ] タスク更新時にcategoryIds変更可能
- [ ] カテゴリでのフィルタリング対応
  - `GET /api/tasks?category=1,2`

### 3. フロントエンド実装

#### 3.1 カテゴリ管理UI
- [ ] カテゴリ一覧表示セクション
- [ ] カテゴリ作成フォーム
- [ ] カテゴリ編集機能
- [ ] カテゴリ削除機能（確認付き）
- [ ] カラーピッカー（プリセットから選択）

#### 3.2 タスクへのカテゴリ割り当て
- [ ] タスク作成フォームにカテゴリ選択追加
- [ ] タスク編集モーダルにカテゴリ選択追加
- [ ] 複数カテゴリ選択のUI（チェックボックス）

#### 3.3 カテゴリ表示
- [ ] タスク一覧でカテゴリバッジ表示
- [ ] カテゴリ色の反映
- [ ] カテゴリなしタスクの表示

#### 3.4 フィルタリング機能
- [ ] カテゴリフィルターUI（サイドバーまたはドロップダウン）
- [ ] 複数カテゴリでのフィルタリング
- [ ] "すべて" / "カテゴリなし" フィルター
- [ ] フィルター状態の表示

### 4. スタイリング

- [ ] カテゴリバッジのスタイル
- [ ] カラーピッカーのスタイル
- [ ] フィルターUIのスタイル
- [ ] カテゴリ管理セクションのスタイル

### 5. テスト・検証

- [ ] カテゴリの作成・編集・削除確認
- [ ] タスクへのカテゴリ割り当て確認
- [ ] 複数カテゴリ割り当ての確認
- [ ] フィルタリング動作の確認
- [ ] カテゴリ削除時のタスクへの影響確認

---

## プリセットカラー

```javascript
const PRESET_COLORS = [
  { name: 'Red', value: '#e74c3c' },
  { name: 'Orange', value: '#e67e22' },
  { name: 'Yellow', value: '#f1c40f' },
  { name: 'Green', value: '#27ae60' },
  { name: 'Blue', value: '#3498db' },
  { name: 'Purple', value: '#9b59b6' },
  { name: 'Pink', value: '#e91e63' },
  { name: 'Gray', value: '#95a5a6' }
];
```

---

## データ構造例

```json
// categories.json
{
  "categories": [
    { "id": 1, "name": "Work", "color": "#3498db" },
    { "id": 2, "name": "Personal", "color": "#27ae60" }
  ],
  "nextId": 3
}

// tasks.json (updated)
{
  "tasks": [
    {
      "id": 1,
      "title": "Sample task",
      "categoryIds": [1, 2],
      ...
    }
  ]
}
```

---

## 完了条件

- [ ] カテゴリの作成・編集・削除ができる
- [ ] カテゴリに色を設定できる
- [ ] タスクに複数カテゴリを割り当てられる
- [ ] カテゴリでタスクをフィルタリングできる
- [ ] カテゴリバッジが正しく表示される
